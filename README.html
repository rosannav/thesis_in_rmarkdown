<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Thesis in Rmarkdown (old)</title>
<!-- excuse the horrendous code, it was autogenerated -->
<style>
		body {
			font-family: Arial, sans-serif;
			background-color: #f8f8f8;
			color: #333;
			margin: 0;
			padding: 0;
		}

		.container {
			max-width: 800px;
			margin: 0 auto;
			padding: 20px;
		}

		h1 {
			font-size: 36px;
			text-align: center;
			margin-top: 50px;
			margin-bottom: 30px;
		}

		p {
			font-size: 18px;
			line-height: 1.5;
			margin-bottom: 20px;
		}

		a {
			color: #0077cc;
			text-decoration: none;
		}

		a:hover {
			text-decoration: underline;
		}
	</style>
</head>
<body>

<h1>Writing your thesis with R Markdown (1) – Getting started</h1>

<p>Looking to use R Markdown to create your thesis? You have come to the right place. R Markdown is a great tool for integrating data analysis and report writing, but it can be a bit daunting to get started. I wrote my thesis with R Markdown last year, and sure spent quite some time browsing the internet figuring out how to get my text, code, and figures to work together and turn into a coherent thesis. But it was worth the struggle (and an excellent way to procrastinate), and I’d love to share with you what I’ve learned.</p>

<p>This will be a series of blog posts discussing how to write a thesis with R Markdown. We’ll start with the very basics: installing the necessary software and getting familiar with the various markup languages you’ll need. Then we’ll prepare an R Markdown document that will represent one thesis chapter. When I wrote my thesis, I wanted to do the following things in each chapter:</p>

<ul><li>Writing text<ul><li>Spelling check this text</li><li>Comment on this text</li></ul></li><li>Writing equations<ul><li>With references</li><li>And captions</li></ul></li><li>Including figures (non-R creations)<ul><li>With references</li><li>And captions</li></ul></li><li>Citing stuff<ul><li>And add a bibliography</li></ul></li><li>Adding R code<ul><li>Render R code</li><li>Add figure captions to R rendered figures + references</li></ul></li><li>Including tables<ul><li>Really difficult tables</li></ul></li></ul>

<p>In the next blog post, I will explain how to do each of these things in a thesis chapter (<em>UPDATE: I have decided to split the chapter contents blog post into to blog posts, 1: text, citations and equations and 2: figures, R code and tables</em>). Then, I’ll show how to use multiple documents together, and get the fiddly layout bits like page numbering, title pages and table of contents stuff working to create a full thesis document. But first, let’s get started with the basics.</p>

<p><strong>Getting started: What do we need?</strong></p>

<p><strong>Languages and tools: </strong>R, <a href="https://daringfireball.net/projects/markdown/" target="_blank" rel="noreferrer noopener">Markdown</a>, <a href="http://rmarkdown.rstudio.com/" target="_blank" rel="noreferrer noopener">Rmarkdown v2</a>, <a href="https://www.latex-project.org/" target="_blank" rel="noreferrer noopener">Latex</a>, YAML, <a href="http://www.bibtex.org/" target="_blank" rel="noreferrer noopener">BibTeX</a><strong> Software:</strong> <a href="https://cran.r-project.org/" target="_blank" rel="noreferrer noopener">R</a> &amp; <a href="https://www.rstudio.com/products/rstudio/download/" target="_blank" rel="noreferrer noopener">RStudio</a>, pdflatex (<a href="http://miktex.org/download" target="_blank" rel="noreferrer noopener">MikTeX</a> on windows, <a href="https://tug.org/mactex/mactex-download.html" target="_blank" rel="noreferrer noopener">MacTeX </a>on mac), <a href="https://www.mendeley.com/download-mendeley-desktop/" target="_blank" rel="noreferrer noopener">Mendeley</a> <strong>R Package:</strong> knitr, use this code:</p>

<pre class="wp-block-code"><code>install.packages("knitr")
library(knitr)
</code></pre>

<p>Don’t worry, it sounds way scarier than it actually is. <strong>Markdown</strong> is a very simple and straightforward language. No need to worry about it now, but if you’d like to get more familiar with it have a look at <a href="https://daringfireball.net/projects/markdown/" target="_blank" rel="noreferrer noopener">this reference guide </a>or <a href="http://markdowntutorial.com/" target="_blank" rel="noreferrer noopener">learn it here</a>. <strong>R Markdown</strong> is almost the same as Markdown, but has the added feature off embedding and dealing with R code in your documents. <strong>LaTeX</strong> is another markup language, that is not as easy to read and write as Markdown but allows for much more flexibility in creating your document. The code that is placed at the top of document is called <strong>YAML,</strong> and it explains how the document should be rendered. <strong>BiBTeX</strong> is an excellent reference management system (if you are used to the horror of inserting references with MS word add-ons, you are going to be really happy using this :). BiBTeX files can be created with Mendeley, more on this later.</p>

<p>Here is an example of an R Markdown document, and how each of the languages are used:</p>

<p><a href="https://rosannavanhespenresearch.files.wordpress.com/2016/01/repro_res_ex1_decorated.png"></a></p>

<figure class="wp-block-image"><img decoding="async" src="https://rosannavanhespenresearch.files.wordpress.com/2016/01/repro_res_ex1_decorated.png?w=584" alt="repro_res_ex1_decorated" class="wp-image-211"></figure>

<p><br><em>Click on the image to enlarge.</em></p>

<p>You can see there’s quite a few different languages used in the same document. In the next blog post we will go into the details of each of these parts of the document. For now, (once everything is installed and communicating with each other – if you are having problems, feel free to leave a question in the comments), I recommend to just play around with R Markdown for a bit to get a feel for it. You can do this by going to <em>Rstudio &gt; File &gt; New File &gt; R markdown… &gt; OK</em>. This opens a standard R Markdown file (.rmd) with some instructions.</p>

<p>Good luck!</p>

<p><em>You may find yourself worrying about this at some poin (probably not yet, but when you do, you’ll know where to look): there are multiple types of markdown, which are called flavours. Examples are ‘github markdown’, ‘multiple markdown’ and ‘pandoc markdown’. The markdown we are using here is called pandoc markdown.</em></p>

<h1>Writing your thesis with R Markdown (2) – Text, citations and equations</h1>

<p><em>This is the second post in a short series of tutorials to write your thesis in Rmarkdown. You can find instructions on how to get started in <a href="https://www.rosannavanhespen.nl/2016/02/16/writing-your-thesis-with-r-markdown-1-getting-started/" target="_blank" rel="noreferrer noopener">the first post</a>. Note that these tutorials were written by a Windows user, so if you are using a different operating system some details may differ.</em></p>

<p>Welcome back to part two in this short series of tutorials! In the last post we looked at setting up all software and what an R Markdown document looks like. Now we will look at including text, citations, and equations in your thesis chapter. First up, writing plain text and headings:</p>

<h2>Step 1: Writing plain text and headings</h2>

<p>Take your standard Rmarkdown file (Rstudio &gt; File &gt; New File &gt; R markdown… &gt; OK) and remove all the text except for the YAML header (the bit between the three dashes). Now write a little bit of text. Click on ‘knit’ to see what the output looks like (Note: I’ll be using pdf output in the examples). You can try adding some headings by using #-signs to structure your text. Below is an example that uses different headings:</p>

<figure><a href="https://rosannavanhespenresearch.files.wordpress.com/2016/02/heading_example.png"><img decoding="async" src="https://rosannavanhespenresearch.files.wordpress.com/2016/02/heading_example.png?w=584" alt="heading_example" class="wp-image-231"></a><figcaption>Left: Writing headings in R Markdown. Right: .pdf output. <em>Click on image to enlarge.</em></figcaption></figure>

<h2>Step 2: Citing someone</h2>

<p>Make sure you have Mendeley installed (you don’t necessary need to use Mendeley. You can also check if your preferred reference manager provides BibTeX output or <a href="https://www.economics.utoronto.ca/osborne/latex/BIBTEX.HTM" target="_blank" rel="noreferrer noopener">make your own bibtex file</a> if you like. For the sake of speed and easiness, I’m going to use Mendely in my example).</p>

<p>If this is your first time using Mendeley and you don’t have any articles added yet, simply find a paper on you computer and drag and drop the pdf file into Mendeley.</p>

<p>Open Mendeley and select <em>Mendeley &gt; Tools &gt; Options &gt; BibTeX</em>. Select ‘<em>Escape LaTeX special characters</em>’, ‘<em>Enable BibTeX syncing</em>’ and ‘<em>Create one BibTeX file for my whole library</em>’. Choose a path to sync your bibtex file to. Make sure you choose the same folder as where your R Markdown document lives. If you don’t want to do that, you can copy and paste the file into the R Markdown document directory, but realise that it is not longer automatically synced if you change something in Mendeley, so you’ll have to do update the bibtex file manually.</p>

<p>Now go to the R Mmarkdown document we made in step 1. In the YAML header, write ‘<em>bibliography: library.bib</em>’ (unless your .bib file has a different name), so your header will look like something this:</p>

<pre class="wp-block-code"><code>title: "Untitled" 
output: html_document 
bibliography: library.bib
</code></pre>

<p>In Mendeley, check the citation key of the paper you want to cite (in the Document Details tab). In your R Markdown document, write the citation key in square brackets, for example . Below is an example of the output.</p>

<figure class="wp-block-image"><a href="https://rosannavanhespenresearch.files.wordpress.com/2016/02/citation-example.png"><img decoding="async" src="https://rosannavanhespenresearch.files.wordpress.com/2016/02/citation-example.png?w=584" alt="citation-example" class="wp-image-234"></a><figcaption>Left: Using citations in R Markdown. Right: .pdf output. <em>Click on image to enlarge.</em></figcaption></figure>

<p>For information more information on citation syntax have a look at <a href="http://rmarkdown.rstudio.com/authoring_bibliographies_and_citations.html" target="_blank" rel="noreferrer noopener">here at the official R Markdown website</a>.</p>

<p>You can also change the citation style. Have a look at <a href="https://github.com/citation-style-language/styles" target="_blank" rel="noreferrer noopener">this online .csl file database</a>, chances are your preferred journal is on there (these files are usually correct, but check with the actual journal to make sure). Download the file and add it to the same folder as where R Markdown document lives. In your YAML header, add ‘<em>csl: your-preferred-citation-style.csl</em>’.</p>

<h2 id="step-3-adding-an-equation" class="pmb-header">Step 3: Adding an equation</h2>

<p>Inline equations can be added by writing dollar signs around an equation: ‘<em>$ a + b = c $</em>’. If you want to add an equation on it’s own line, simply add the LaTeX code for the equation (R Markdown will recognise the LaTeX automatically):</p>

<pre class="wp-block-code"><code>\begin{equation}
\label{eq-abc}
a + b = c
\end{equation}
</code></pre>

<p>The ‘<em>\label{}</em>’ bit is used to give the equation a name, that you can use to refer to the equation in text, for example by writing: ‘<em>see equation <code>\ref{}</code></em>’ or ‘<em>see <code>\autoref{}</code></em>’ .I recommend choosing a label name that’s easy to remember and clearly explains what the equation is about. Below is an example of the equation in R Markdown and .pdf output.</p>

<p>You can find some excellent documentation on how to write latex equations <a href="https://en.wikibooks.org/wiki/LaTeX/Mathematics" target="_blank" rel="noreferrer noopener">here</a>.</p>

<figure class="wp-block-image"><a href="https://rosannavanhespenresearch.files.wordpress.com/2016/02/equation-example.png"><img decoding="async" src="https://rosannavanhespenresearch.files.wordpress.com/2016/02/equation-example.png?w=584" alt="equation-example" class="wp-image-237"></a><figcaption>Left: Writing equations in LaTeX/R Markdown. Right: .pdf output. <em>Click on image to enlarge.</em></figcaption></figure>


<p><em>That’s it for now! In the next post we will look at including figures, tables and R code. If you have any questions, feel free to post them in the comments.</em></p>

<h1>Writing your thesis with R Markdown (3) – Figures, R code and tables</h1>

<p><em>This is the third post in a short series of tutorials to write your thesis in R Markdown. You can find instructions on how to get started in <a href="https://cocky-elion-5880fb.netlify.app/2016/02/03/writing-your-thesis-with-r-markdown-1-getting-started/">the first post</a>. These tutorials were written by a Windows user, so if you are using a different operating system some details may differ.</em></p>

<p>Welcome back to part three of this tutorial! In the <a href="https://cocky-elion-5880fb.netlify.app/2016/02/17/writing-your-thesis-with-rmarkdown-2-text-citations-and-equations/">previous post</a> we looked at including text, citations, and equations in the thesis chapter. This time we’ll look at including figures, R code and tables. Let’s start with the figures:</p>

<h3 id="step-4-including-a-figure" class="pmb-header">Step 4: Including a figure</h3>

<p>You can include a figure in an R Markdown by writing <code>!(name_of_figure.jpg)</code> in the document. To make sure a caption shows up underneath your figure, we need to turn on the captions option, as in R Markdown it is turned off by default. You can do this by writing this bit in your YAML header:</p>

<pre class="wp-block-code"><code>output:
  pdf_document:
    fig_caption: yes
</code></pre>

<p>The indentation of the above bit of text is important, knitr will not understand it if it is not written exactly like the above.</p>

<p>To refer to the figure in-text, a label needs to be added to the figure. This can be done by writing: <code>!(filename.png)</code> (what you are actually doing here is adding a LaTeX label to Markdown text). Then, you can write, for example, <em>see figure <code>\ref{}</code></em>, or as you may remember from the previous post, <em>see <code>\autoref{}</code></em>.</p>

<figure class="wp-block-image"><a href="https://rosannavanhespenresearch.files.wordpress.com/2016/02/figure-example.png"><img decoding="async" src="https://rosannavanhespenresearch.files.wordpress.com/2016/02/figure-example.png" alt="figure-example"></a><figcaption>Left: Adding a figure. Right: .pdf output. <em>Click on image to enlarge</em></figcaption></figure>

<p><em>Note: figures are seen as ‘floats’ by LaTeX, and therefore are not placed immediately where you call them. If you want to get more specific with how to place them and what height and such, I recommend you use latex syntax to include the figure instead of using the R Markdown syntax. You can read more <a href="https://www.sharelatex.com/learn/Inserting_Images">here</a>. I generally did not find it necessary in my thesis, but it requires some playing around to figure out what works best for your thesis.</em></p>

<h3 id="step-5-using-r-code" class="pmb-header">Step 5: using R code</h3>

<p>This is where we get to the real magic of using R Markdown: including R code and data anlaysis directly into your thesis!</p>

<p>Here is how you include R code in your story. It’s called a code chunk:</p>

<pre class="wp-block-code"><code>```{r}
plot(iris)
```
</code></pre>

<p>There are a bunch of values you can you give your code chunks. For example, if you don’t want to include code in your text, but just the output, you can write <code>{r include = FALSE}</code>. You can also suppress warnings by writing <code>{r warning = FALSE}</code>. If you don’t do this and something is wrong with your code, a warning message might be printed in your thesis. Anyway, there’s a whole list of things you can do with knitr chunks. I only discuss the ones I found necessary here, but if you’re interested, Yihui Xie, the developer of knitr, provides some <a href="http://yihui.name/knitr/">great documentation on his website</a>.</p>



<p>There are probably some things you want most of your code chunks to do, so you can set your own defaults for your thesis using:</p>



<pre class="wp-block-code"><code>```{r include=FALSE}
knitr::opts_chunk$set(fig.path = /figures/, echo = FALSE, warning = FALSE, message = FALSE)
```
</code></pre>



<p>Basically what you are saying here is firstly, you want the figures to be saved in the folder ‘figures’, secondly, the R code itself won’t be printed, just the output, thirdly, warnings won’t be printed and finally, messages (similar to warnings) won’t be printed either.</p>



<p><em>Note: If you are making rather big calculations in the code chunks, this can make it slow to render your thesis (i.e. knitting). You can cache files with <code>cache=TRUE</code>. Note that you will need to turn this off if you want to update your calculations.</em></p>



<p>One of the great things about including R code directly in your thesis is that you can generate and change figures as you go. To create a figure in your thesis using R code, just write the R code as you would normally when making a figure, for example:</p>



<pre class="wp-block-code"><code>```{r fig.cap = "figure caption. \\label{figurelabel}", fig.height=12, fig.width=10}
plot(iris)
```
</code></pre>



<p>As you can see, I’ve added some info to the R code chunk about how to render the figure. I defined a figure caption with <code>fig.cap</code> and added a LaTeX label for in-text reference. Don’t forget to write the double backslash when adding a label name.</p>



<p>You can also refer to stuff in your text, that you calculated inside a code chunk. For example, if the code chunk says:</p>



<pre class="wp-block-code"><code>```{r include = FALSE}
variable_t = 3 * 4
```
</code></pre>



<p>you can refer to that in text by simply writing: <code>`r variable_t`</code>.</p>



<p>Below is image that compares the .rmd file and the .pdf output to show what kind of output each code chunk produces.</p>



<figure class="wp-block-image"><a href="https://rosannavanhespenresearch.files.wordpress.com/2016/02/rcode-example.png"><img decoding="async" src="https://rosannavanhespenresearch.files.wordpress.com/2016/02/rcode-example.png?w=584" alt="rcode-example" class="wp-image-255"></a><figcaption>Left: Using R code in R Markdown. Right: .pdf output. <em>Click on image to enlarge.</em></figcaption></figure>



<h3 id="step-6-including-a-table" class="pmb-header">Step 6: Including a table</h3>



<p>Sometimes you find yourself needing to include a table. <a href="http://rmarkdown.rstudio.com/authoring_pandoc_markdown.html#tables">Markdown </a>and <a href="http://www.inside-r.org/packages/cran/knitr/docs/kable">kable </a>can do the trick, but I do not recommend using it for ‘serious, thesis-grade’ tables. In a thesis, you will almost always find yourself wanting more flexibility than Markdown and kable can offer. I therefore highly recommend using LaTeX when including tables.</p>



<p>This is some simple LaTeX code for a neat-looking table you might want to use in your thesis:</p>



<pre class="wp-block-code"><code>\begin{table}
\centering
\caption{}
\label{table-paramvalues}
\begin{tabular}{ p{4cm} p{4cm} p{4cm} }
\hline \\ 
colname &amp;amp; colname &amp;amp; colname \\ 
\hline \\ 
Info &amp; info &amp; info \\ 
Info &amp; info &amp; info \\ 
Info &amp; info &amp; info \\ 
\hline
\end{tabular}
\end{table}
</code></pre>



<p>I will not go into great detail about LaTeX tables here, but if you’d like some more information, have a look at this <a href="https://en.wikibooks.org/wiki/LaTeX/Tables" target="_blank" rel="noreferrer noopener">Wiki</a>. If you’re finding LaTeX tables a bit confusing, you can also write your table in excel and then upload it to<a href="http://www.tablesgenerator.com/" target="_blank" rel="noreferrer noopener"> this website</a>: it will make a LaTeX table for you. Also, I had to use a couple of multi-page tables in my thesis. If you find you need to do the same, have a google search for ‘latex longtable’.</p>



<p><em>Note: References are note translated to LaTeX, but into plain text. This means that you cannot add any R Markdown references (i.e. ) in a LaTeX table. If you want more information, it got me quite confused as well, so I wrote a question and then an answer about it on <a href="http://tex.stackexchange.com/questions/272475/citations-in-tabular-environment-not-working/290915#290915" target="_blank" rel="noreferrer noopener">tex.stackexchange.com</a>.</em></p>



<figure class="wp-block-image"><a href="https://rosannavanhespenresearch.files.wordpress.com/2016/02/table-example.png"><img decoding="async" src="https://rosannavanhespenresearch.files.wordpress.com/2016/02/table-example.png?w=584" alt="table-example" class="wp-image-257"></a><figcaption>Left: Including a LaTeX table. Right: .pdf output. LaTeX automatically places tables at the bottom of the page. Click on image to enlarge.</figcaption></figure>



<p>And that’s it! Of course this is only one chapter, so in the next post we’ll have a look a writing multiple chapter in multiple .rmd files, how to put together and turn it into a pretty thesis. If you have any questions, feel free to post them in the comments or shoot me an email!</p>
</div></article><article id="post-44" class="post-44 post type-post status-publish entry hentry pmb-post-article"><header class="pmb-post-header entry-header"><h1 class="entry-title pmb-header">Writing your thesis with R Markdown (4) – Putting the thesis together</h1></header><div class="entry-meta"><span class="posted-on pmb-post-meta">March 29, 2016</span>   <span class="pmb-post-meta taxonomy-links category-links">Categories: RMarkdown</span></div><div class="entry-content post-content">
<p><em>This is the fourth post in a short series of tutorials to write your thesis in R Markdown. You can find instructions on how to get started in <a href="https://cocky-elion-5880fb.netlify.app/2016/02/03/writing-your-thesis-with-r-markdown-1-getting-started/">the first post</a>. These tutorials were written by a Windows user, so if you are using a different operating system some details may differ.</em></p>



<p>Welcome back! You have arrived at the fourth part of this tutorial. In <a href="https://cocky-elion-5880fb.netlify.app/2016/03/18/writing-your-thesis-with-r-markdown-3-figures-r-code-and-tables/">the previous post</a> we looked at including figures, R code, and tables IN the thesis chapter. This time we’ll be looking at making multiple chapters, putting them together and turnING them into a thesis. In the next (and hopefully last) post I will show you how to adjust the thesis layout. Let’s get started!</p>



<p><strong>Step 1: Merging multiple chapters into one thesis</strong></p>



<p>You may have found that writing your whole thesis in one document can quickly get confusing. If you are like me, you have probably written multiple chapters in multiple documents. So let’s make a ‘parent document’ called THESIS.rmd that contains all the ‘child’ chapters. In R Markdown you can easily do this using this bit of code (assuming you keep chapters in the same folder as the THESIS.rmd file) in your THESIS.rmd file:</p>



<pre class="wp-block-code"><code>```{r child = 'chapterxx.Rmd'}
```
</code></pre>



<p>You can add as many child documents to the parent document as you like. If you want to make sure that chapters start on a new page, use the LaTeX command <code>\newpage</code> between the chapters you add to make each chapter start on a new page. Similarly, you might want to add the LaTeX command <code>\FloatBarrier</code> between chapters to make sure that figures, tables and such that belong to one chapter are not accidentally moved to another chapter (this happens sometimes as LaTeX is a typesetting system that is designed to allow the author to write without having to worry about the layout of the document; LaTeX tries to figure out the best spot to place figures and tables, which depends on the space that is available). To ensure the \FloatBarrier command works, you need to load a LaTeX package. You can do this very easily by adding this bit of code to the YAML header (the bit between the dashed lines at the top of the document):</p>



<pre class="wp-block-code"><code>header-includes:
- \usepackage{placeins}
</code></pre>



<p><strong>Step 2: Adding a Titlepage, Declaration, Abstract and Acknowledgements</strong></p>



<p>The same way you added chapters to your thesis, you can also add a titlepage, declaration page, abstract and acknowledgements. LaTeX has some fancy syntax to do this (for example <a href="https://www.sharelatex.com/blog/2013/08/02/thesis-series-pt1.html">see here</a>), but I didn’t look into this, as I found just straight up adding the pages as child documents was nice enough. Basically, I treated each of these pages as I would treat the chapter documents. For example, I added:</p>



<pre class="wp-block-code"><code>```{r child = 'titlepage.Rmd'}
```
</code></pre>



<p>to include the titlepage (for an example of titlepage you can write in R Markdown/LaTeX, see <a href="https://raw.githubusercontent.com/rosannav/thesis_in_rmarkdown/master/titlepage.rmd">here</a> for the .rmd file and <a href="https://github.com/rosannav/thesis_in_rmarkdown/blob/master/titlepage.pdf">here</a> for the .pdf example..</p>



<p>By now, the THESIS.rmd parent file will look something like <a href="https://raw.githubusercontent.com/rosannav/thesis_in_rmarkdown/master/thesis-step2.Rmd">this</a>, which produces <a href="https://github.com/rosannav/thesis_in_rmarkdown/blob/master/thesis-step2.pdf">this</a> pdf file. I’ve given the chapters a little bit of text so they wouldn’t look so empty :).</p>



<p><strong>Step 3: Adding the Table of Contents, List of Figures, List of Tables, References</strong></p>



<p>R Markdown automatically places all references at the bottom of the document, but doesn’t not give it a title. To do this manually, just write <em>#References</em> at the bottom of THESIS.rmd document. The references will be placed below this.</p>



<p>LaTeX offers some inbuilt functionality to automatically generate the Table of Contents, List of Figures and List of Tables. It is fairly simple: wherever you want to include one of these, you just type: <code>\tableofcontents</code>, <code>\listoffigures</code> or <code>\listoftables</code> in the THESIS.rmd file. To change the Table of Contents depth to for example headings and subheadings only, write <code>\setcounter{tocdepth}{2}</code>. You can play around with the number for a bit to see what depth you prefer. This is probably also a good moment to add some section numbering, so chapters and sections will be shown as e.g. <em>1. Introduction</em> and <em>1.1 Things</em> instead of <em>Introduction</em> and <em>Things</em>. We can do this easily by adding <code>number_sections: yes</code> to the YAML header:</p>



<pre class="wp-block-code"><code>output:
  pdf_document:
    fig_caption: yes
    number_sections: yes
</code></pre>



<p>This is what the table of contents will look by now (see here for the full .rmd and .pdf files):</p>



<p><img decoding="async" src="https://cocky-elion-5880fb.netlify.app/post/2016-03-29-writing-your-thesis-with-r-markdown-4-putting-the-thesis-together/thesis-step3A.png" alt="Table of Contents with numbered sections."><br><em>Table of Contents with numbered sections.</em></p>



<p>As you can see, the titlepage, declaration, abstract, acknowledgements, list of figures and list of tables are not shown in the table of contents. This is because these pages don’t have chapter headings (i.e. for the abstract page I just wrote <em>abstract</em> instead of <em>#Abstract</em> – see <a href="https://github.com/rosannav/thesis_in_rmarkdown">here</a> for the child documents I used in my examples – you might have to click on <em>Raw</em> as Github automatically renders any markdown in documents). You can include them by writing <em>#Abstract</em>, but that way they will appear numbered in the table of contents as well. To avoid this, you can instead write <code>\section*{Abstract}</code> at the place where you’d like the title to appear. Using the <code>\section*{}</code> command will not automatically add the section to the table of contents, you can do this by writing this bit of code:</p>



<pre class="wp-block-code"><code>\addcontentsline{toc}{section}{Abstract}
</code></pre>



<p>Similarly, you can write <code>\addcontentsline{toc}{section}{List of Figures}</code> to add the list of figures to the table of contents.</p>



<p><em>Note: Although I’ve been talking about chapter headings here, officially they are called section headings. You can read more about it <a href="https://en.wikibooks.org/wiki/LaTeX/Document_Structure#Sectioning_commands">here</a>.</em></p>



<p>By now, the THESIS.rmd parent file will look something like <a href="https://raw.githubusercontent.com/rosannav/thesis_in_rmarkdown/master/thesis-step3.Rmd">this</a>, which produces <a href="https://github.com/rosannav/thesis_in_rmarkdown/blob/master/thesis-step3.pdf">this</a> pdf file.</p>



<p><strong>Step 4: Global R code chunk options</strong></p>



<p>As we saw in <a href="https://cocky-elion-5880fb.netlify.app/2016/03/18/writing-your-thesis-with-r-markdown-3-figures-r-code-and-tables/">tutorial #3</a> that you can set knitr options that apply to all code chunks in your document. If you define your defaults in the parent document, these will be applied to all code chunks in the child documents (unless a code chunk has its own settings I’m pretty sure they won’t be overridden). The R code chunk options I’ve found useful are:</p>



<pre class="wp-block-code"><code>```{r include=FALSE}
knitr::opts_chunk$set(fig.path = 'figures/', 
                      echo = FALSE, warning = FALSE, message = FALSE)
```
</code></pre>



<p>Just add this chunk at the top of the document, right below the YAML header and you’re good to go.</p>



<p><em>Note: all the stuff you define in the parent document (i.e. YAML header, global R code chunks settings) will not be included if you try to render a child document seperately. So if you have a THESIS.rmd file that includes the package ‘placeins’, chapter1.rmd will not have this, unless you are rendering chapter1.rmd as a child document of THESIS.rmd.</em></p>



<p>By now you have pretty much got your whole thesis put together. All that is left now is the layout! If you found anything confusing, don’t hesitate to leave a comment or email me, and hopefully I’ll see you again in the last post.</p>
</div></article><article id="post-42" class="post-42 post type-post status-publish entry hentry pmb-post-article"><header class="pmb-post-header entry-header"><h1 class="entry-title pmb-header">Writing your thesis with R Markdown (5) – The thesis layout</h1></header><div class="entry-meta"><span class="posted-on pmb-post-meta">March 30, 2016</span>   <span class="pmb-post-meta taxonomy-links category-links">Categories: RMarkdown</span></div><div class="entry-content post-content">
<p><em>This is the fifth and last post in a short series of tutorials to write your thesis in R Markdown. You can find instructions on how to get started in <a href="https://cocky-elion-5880fb.netlify.app/2016/02/16/writing-your-thesis-with-r-markdown-1-getting-started/">the first post</a>. These tutorials were written by a Windows user, so if you are using a different operating system some details may differ.</em></p>



<p>Hi there, you’ve made it to the last post! Today we’ll be looking at making the thesis extra pretty.</p>



<p><strong>Step 5: Organising the document layout with the YAML header</strong></p>



<p>As you may remember, you can write a bunch of commands in the YAML header to tell knitr and LaTeX how to render the document. There are a <a href="http://rmarkdown.rstudio.com/pdf_document_format.html" target="_blank" rel="noreferrer noopener">whole range of things </a>you can define here to adjust your layout. Here’s what I did:</p>



<pre class="wp-block-code"><code>---
output:
  pdf_document:
    fig_caption: yes
    number_sections: yes
bibliography: library.bib
csl: methods-in-ecology-and-evolution.csl
urlcolor: black
linkcolor: black
fontsize: 12pt
geometry: margin = 1.2in
header-includes:
- \usepackage{placeins}
- \usepackage{setspace}
- \usepackage{chngcntr}
- \onehalfspacing
- \counterwithin{figure}{section}
- \counterwithin{table}{section}
---
</code></pre>



<p>We’ve already looked at number_sections in step 3 in <a href="https://cocky-elion-5880fb.netlify.app/2016/03/30/writing-your-thesis-with-r-markdown-5-the-thesis-layout/2016/03/29/writing-your-thesis-with-r-markdown-4-putting-the-thesis-together/">the previous post</a>, and as you may recall from <a href="https://cocky-elion-5880fb.netlify.app/2016/02/17/writing-your-thesis-with-rmarkdown-2-making-a-chapter/">tutorial #2</a>, we used this bit:</p>



<pre class="wp-block-code"><code>bibliography: library.bib
csl: methods-in-ecology-and-evolution.csl
</code></pre>



<p>to define what library to use for the citations, and define the preferred citation style. The statements</p>



<pre class="wp-block-code"><code>urlcolor: black
linkcolor: black
</code></pre>

<p>are to indicate what colour the external (urlcolor) and internal (linkcolor) links should have. By default the linkcolor is magenta. Here I went a little crazy and opted for green and cyan:</p>

<p><a href="https://rosannavanhespenresearch.files.wordpress.com/2016/03/ex-step4-6.png"></a></p>

<figure class="wp-block-image"><img decoding="async" src="https://rosannavanhespenresearch.files.wordpress.com/2016/03/ex-step4-6.png" alt=""></figure>

<p><br>Left: External links are now green, and internal links cyan. Right: pdf output. </p>

<p>The following arguments are pretty straightforward as well:</p>

<pre class="wp-block-code"><code>fontsize: 12pt
geometry: margin = 1.2in
</code></pre>

<p>to set fontsize at 12 points, and create a margin of 1.2 inches (30 mm).</p>

<p>All the stuff that is included under <code>header-includes:</code> are LaTeX arguments, such as packages that need to be loaded. So far, we’ve used the package <code>placeins</code> for the <code>\FloatBarrier</code> in step 1 of <a href="https://cocky-elion-5880fb.netlify.app/2016/03/29/writing-your-thesis-with-r-markdown-4-putting-the-thesis-together/">the previous post</a>. The argument <code>\onehalfspacing</code> is used to set the line spacing (more info on LaTeX’s line spacing can be found <a href="http://tex.stackexchange.com/questions/65849/confusion-onehalfspacing-vs-spacing-vs-word-vs-the-world">here</a>. The <code>\onehalfspacing</code> argument is part of the <code>setspace</code> package. I used the arguments <code>- \counterwithin {figure}{section}</code> and <code>- \counterwithin{table}{section}</code> to have LaTeX number the figures and tables according the section they belong to (e.g. the third figure in the thesis, but the first figure of the second chapter, will be named ‘figure 2.1’ instead of ‘figure 3’). To use these arguments, we need to use the package <code>chngcntr</code>.</p>

<p><strong>Step 6: Headers, footers and page numbering</strong></p>

<p>You’ll probably want to add some headers, footers and page numbering to the document so your reader doesn’t get completely lost. Page numbering is straightforward. You can use <code>\pagenumbering{gobble}</code> for pages without numbering, <code>\pagenumbering{roman}</code> for roman page numbering and <code>\pagenumbering{arabic}</code> for normal page numbering. Just include the argument wherever you want the have the page numbering changed. Default page numbering is arabic.</p>

<p>For headers and footers we can use the package ‘<em>fancyhdr</em>’. You can do some really cool stuff with it, see <a href="http://texblog.org/2007/11/07/headerfooter-in-latex-with-fancyhdr/">here</a> for some info. Here’s what I did with it:</p>

<pre class="wp-block-code"><code>\pagestyle{fancy}
\fancyhead{}
\fancyhead{}
\renewcommand{\headrulewidth}{0.4pt}
\renewcommand{\footrulewidth}{0pt}
</code></pre>

<p>This bit of code states that from now on pages have fancy headers (<code>\pagestyle{fancy}</code>). Lines 2 and 3 state that headers on the left even (LE), right odd (RO), left odd (LO) and right even (RE) pages are empty by default. I set the line below the header to a 0.4pt width (<code>\renewcommand{\headrulewidth}{0.4pt}</code>), and removed the footer line by setting it to 0pt. I then manually set the header title for each page by writing, for example, <code>\fancyhead{Abstract}</code> (CO, CE means centrally displayed on odd and even pages).</p>

<p>When pages are fully covered with a picture, graph or table, you might prefer to turn off page numbering and headers or footers. You can do this by adding this bit of code under the header-includes in the YAML header:</p>

<pre class="wp-block-code"><code>- \usepackage{floatpag}
- \floatpagestyle{empty}
</code></pre>

<p>If you’d like to know what the files should like by now, you can see what the <a href="https://raw.githubusercontent.com/rosannav/thesis_in_rmarkdown/master/thesis-step6.Rmd">THESIS.rmd</a> and <a href="https://github.com/rosannav/thesis_in_rmarkdown/blob/master/thesis-step6.pdf">THESIS.pdf</a> files will look by now.</p>

<p><strong>Spelling checking and commenting</strong></p>

<p>One thing we did not look at is spelling checking and commenting. There various ways to do this, but none of them are as elegant and easy to use as the ones in editors like MS Word. I tried a bunch of things, but decided that the best for me to deal with this was to convert .rmd to .pdf files as usual, and then use a pdf to word converter (it is also possible to create a .doxc file with knitr, but because I didn’t optimise the .rmd file for conversion to word it creates quite messy word documents. This makes it hard for others (supervisors) to get an idea what the final document is supposed to look like).</p>

<p>If you are working with the sublime editor, you can turn the spell checker on in there: <a href="http://juristr.com/blog/2014/11/enable-spell-check-sublime-markdown/">http://juristr.com/blog/2014/11/enable-spell-check-sublime-markdown/</a>.</p>

<p>If you need to comment to yourself while you’re writing in the .rmd file, you can use this syntax <code>&lt;--your comment here--&gt;</code>. It works alright, although you have to be careful with it: if you accidentally remove the last bit of the comment (the <code>--&gt;</code> bit), but leave the first bit, and then try to compile your thesis, some bits may dissappear as knitr thought they were still part of the comment. I recommend making sure you’ve removed all comments when you compile the final thesis.</p>

<p><strong>A note on pandoc</strong></p>

<p>You might have heard some people talk about pandoc, and you might be wondering what it is. There is actually no need to undertstand what pandoc does, but if you’re curious: knitr depends on pandoc for its .md to .tex conversion. Basically what happens, is that knitr convert your .Rmd file to a .md (markdown file). That means that nothing changes, apart from the R code chunks, that are rendering and transformed into plain markdown. This includes creating the figures and storing them. Pandoc and pdflatex than come into play to convert the .md file to a .pdf, .doxc or .html file:</p>

<p><a href="https://rosannavanhespenresearch.files.wordpress.com/2016/03/pandoc1.png"></a></p>

<figure class="wp-block-image"><img decoding="async" src="https://rosannavanhespenresearch.files.wordpress.com/2016/03/pandoc1.png?w=584" alt="knitr, pandoc, pdflatex" class="wp-image-290"></figure>

<p><br>The role of knitr, pandoc and pdflatex in converting R Markdown to a pdf file.</p>

<p><strong>That’s it!</strong></p>

<p>I hope these tutorials were helpful! If you’d like some more examples, I’ve uploaded an example thesis to github. See <a href="https://github.com/rosannav/thesis_in_rmarkdown/tree/master/example_thesis" target="_blank" rel="noreferrer noopener">here for all the files</a>, and <a href="https://github.com/rosannav/thesis_in_rmarkdown/blob/master/example_thesis/THESIS.pdf" target="_blank" rel="noreferrer noopener">here for the final pdf output</a>. Good luck!</p>

</body>
</html>
